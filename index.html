<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Untuk Kamu, Cintaku ‚ù§Ô∏è</title>
  <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    /* Intro Popup Styles */
    .intro-popup {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, #ff3366, #ff6699);
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      z-index: 9999;
      color: white;
      text-align: center;
      padding: 20px;
      transition: opacity 1s ease;
    }

    .intro-content {
      max-width: 600px;
      padding: 40px;
      background: rgba(255, 255, 255, 0.15);
      backdrop-filter: blur(10px);
      border-radius: 30px;
      box-shadow: 0 20px 50px rgba(0, 0, 0, 0.3);
      animation: floatIn 1.5s ease;
    }

    .intro-title {
      font-family: 'Dancing Script', cursive;
      font-size: 4rem;
      margin-bottom: 20px;
      text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.3);
    }

    .intro-subtitle {
      font-size: 1.5rem;
      margin-bottom: 30px;
      opacity: 0.9;
    }

    .intro-message {
      font-size: 1.2rem;
      line-height: 1.8;
      margin-bottom: 40px;
      padding: 0 20px;
    }

    .intro-input-container {
      margin: 30px 0;
    }

    .intro-input {
      width: 100%;
      max-width: 400px;
      padding: 18px 25px;
      border: none;
      border-radius: 50px;
      font-size: 1.1rem;
      background: rgba(255, 255, 255, 0.9);
      color: #ff3366;
      text-align: center;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    .intro-input::placeholder {
      color: #ff6699;
      opacity: 0.7;
    }

    .intro-input:focus {
      outline: none;
      box-shadow: 0 5px 20px rgba(255, 255, 255, 0.3);
    }

    .start-btn {
      background: white;
      color: #ff3366;
      border: none;
      padding: 20px 50px;
      font-size: 1.4rem;
      border-radius: 50px;
      cursor: pointer;
      font-weight: bold;
      margin-top: 30px;
      transition: all 0.3s ease;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
      display: flex;
      align-items: center;
      gap: 15px;
      animation: pulse 2s infinite;
    }

    .start-btn:hover {
      transform: translateY(-5px);
      box-shadow: 0 15px 40px rgba(0, 0, 0, 0.4);
      background: #fff;
      color: #ff3366;
    }

    .skip-btn {
      background: transparent;
      color: white;
      border: 2px solid rgba(255, 255, 255, 0.5);
      padding: 10px 25px;
      font-size: 1rem;
      border-radius: 25px;
      cursor: pointer;
      margin-top: 20px;
      transition: all 0.3s ease;
    }

    .skip-btn:hover {
      background: rgba(255, 255, 255, 0.2);
      border-color: white;
    }

    .countdown-display {
      font-size: 5rem;
      font-weight: bold;
      margin: 30px 0;
      text-shadow: 0 0 20px rgba(255, 255, 255, 0.5);
    }

    .hearts-animation {
      position: absolute;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: -1;
    }

    .intro-heart {
      position: absolute;
      font-size: 30px;
      opacity: 0.7;
      animation: introHeartFloat 8s linear infinite;
    }

    /* Main Page Styles (Hidden Initially) */
    .main-content {
      display: none;
      opacity: 0;
      transition: opacity 1s ease;
    }

    .main-content.show {
      display: block;
      opacity: 1;
    }

    body {
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(135deg, #ffd6e7 0%, #ffeff6 50%, #ffe6f0 100%);
      min-height: 100vh;
      overflow-x: hidden;
      color: #333;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
    }

    /* Header Styling */
    header {
      text-align: center;
      padding: 40px 20px;
      background: rgba(255, 255, 255, 0.9);
      border-radius: 20px;
      margin-bottom: 30px;
      box-shadow: 0 10px 30px rgba(255, 51, 102, 0.1);
      position: relative;
      overflow: hidden;
    }

    header::before {
      content: 'üíñ';
      position: absolute;
      font-size: 150px;
      opacity: 0.05;
      top: -30px;
      left: -30px;
    }

    h1 {
      font-family: 'Dancing Script', cursive;
      color: #ff3366;
      font-size: 3.5rem;
      margin-bottom: 15px;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
      position: relative;
      z-index: 1;
    }

    .subtitle {
      font-size: 1.2rem;
      color: #666;
      max-width: 600px;
      margin: 0 auto 20px;
      line-height: 1.6;
    }

    /* Gallery Styling */
    .gallery-container {
      background: rgba(255, 255, 255, 0.9);
      border-radius: 20px;
      padding: 30px;
      margin-bottom: 30px;
      box-shadow: 0 10px 30px rgba(255, 51, 102, 0.1);
    }

    .gallery-title {
      text-align: center;
      color: #ff3366;
      font-size: 2rem;
      margin-bottom: 25px;
      font-family: 'Dancing Script', cursive;
    }

    .gallery {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 25px;
      padding: 10px;
    }

    .gallery-item {
      background: white;
      border-radius: 15px;
      overflow: hidden;
      transition: all 0.3s ease;
      box-shadow: 0 5px 15px rgba(0,0,0,0.08);
      cursor: pointer;
    }

    .gallery-item:hover {
      transform: translateY(-10px);
      box-shadow: 0 15px 30px rgba(255, 51, 102, 0.2);
    }

    .gallery-img {
      width: 100%;
      height: 200px;
      object-fit: cover;
      transition: transform 0.5s ease;
    }

    .gallery-item:hover .gallery-img {
      transform: scale(1.05);
    }

    .gallery-caption {
      padding: 20px;
      text-align: center;
      font-size: 1.1rem;
      color: #555;
      line-height: 1.5;
      min-height: 100px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* Message Section */
    .message-section {
      background: rgba(255, 255, 255, 0.9);
      border-radius: 20px;
      padding: 40px;
      margin-bottom: 30px;
      text-align: center;
      box-shadow: 0 10px 30px rgba(255, 51, 102, 0.1);
    }

    .message-title {
      color: #ff3366;
      font-size: 2rem;
      margin-bottom: 20px;
      font-family: 'Dancing Script', cursive;
    }

    .love-message {
      font-size: 1.2rem;
      line-height: 1.8;
      color: #666;
      max-width: 800px;
      margin: 0 auto 30px;
    }

    .message-input {
      width: 100%;
      max-width: 500px;
      padding: 15px;
      border: 2px solid #ffccdd;
      border-radius: 10px;
      font-size: 1rem;
      margin-bottom: 20px;
      transition: border-color 0.3s;
    }

    .message-input:focus {
      outline: none;
      border-color: #ff3366;
    }

    /* Buttons Styling */
    .buttons-container {
      display: flex;
      justify-content: center;
      gap: 20px;
      flex-wrap: wrap;
      margin-bottom: 40px;
    }

    .btn {
      padding: 15px 30px;
      border: none;
      border-radius: 50px;
      font-size: 1.1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 10px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    }

    .btn-primary {
      background: linear-gradient(45deg, #ff3366, #ff6699);
      color: white;
    }

    .btn-secondary {
      background: white;
      color: #ff3366;
      border: 2px solid #ffccdd;
    }

    .btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 20px rgba(255, 51, 102, 0.3);
    }

    .btn:active {
      transform: translateY(0);
    }

    /* Heart Animation */
    .heart {
      position: fixed;
      font-size: 20px;
      pointer-events: none;
      z-index: 1000;
      animation: fall linear forwards;
    }

    @keyframes fall {
      0% {
        transform: translateY(-100px) rotate(0deg);
        opacity: 1;
      }
      100% {
        transform: translateY(100vh) rotate(360deg);
        opacity: 0;
      }
    }

    /* Music Player */
    .music-player {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: white;
      border-radius: 50px;
      padding: 10px 20px;
      box-shadow: 0 5px 20px rgba(0,0,0,0.1);
      display: flex;
      align-items: center;
      gap: 10px;
      z-index: 100;
    }

    .music-btn {
      background: none;
      border: none;
      font-size: 24px;
      cursor: pointer;
      color: #ff3366;
      transition: transform 0.3s;
    }

    .music-btn:hover {
      transform: scale(1.2);
    }

    /* Animations */
    @keyframes floatIn {
      0% {
        opacity: 0;
        transform: translateY(50px) scale(0.9);
      }
      100% {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
    }

    @keyframes introHeartFloat {
      0% {
        transform: translateY(100vh) rotate(0deg);
        opacity: 0;
      }
      10% {
        opacity: 1;
      }
      90% {
        opacity: 1;
      }
      100% {
        transform: translateY(-100px) rotate(360deg);
        opacity: 0;
      }
    }

    @keyframes pulse {
      0%, 100% {
        transform: scale(1);
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
      }
      50% {
        transform: scale(1.05);
        box-shadow: 0 15px 40px rgba(0, 0, 0, 0.4);
      }
    }

    @keyframes countdownPop {
      0% {
        transform: scale(0.5);
        opacity: 0;
      }
      70% {
        transform: scale(1.2);
      }
      100% {
        transform: scale(1);
        opacity: 1;
      }
    }

    /* Birthday Intro Styles */
    .birthday-intro {
      background: linear-gradient(135deg, #FFD700, #FFA500, #FF6347);
    }

    .birthday-cake {
      font-size: 80px;
      margin: 20px 0;
      animation: bounce 2s infinite;
    }

    @keyframes bounce {
      0%, 100% {
        transform: translateY(0);
      }
      50% {
        transform: translateY(-20px);
      }
    }

    /* Responsive Design */
    @media (max-width: 768px) {
      .intro-title {
        font-size: 2.5rem;
      }
      
      .intro-subtitle {
        font-size: 1.2rem;
      }
      
      .intro-content {
        padding: 20px;
        margin: 20px;
      }
      
      h1 {
        font-size: 2.5rem;
      }
      
      .gallery {
        grid-template-columns: 1fr;
      }
      
      .buttons-container {
        flex-direction: column;
        align-items: center;
      }
      
      .btn {
        width: 100%;
        max-width: 300px;
        justify-content: center;
      }
      
      .message-section {
        padding: 20px;
      }
      
      .music-player {
        bottom: 10px;
        right: 10px;
        padding: 8px 16px;
      }
    }

    /* Floating Elements */
    .floating-heart {
      position: fixed;
      font-size: 24px;
      color: rgba(255, 51, 102, 0.3);
      animation: float 6s ease-in-out infinite;
      z-index: -1;
    }

    @keyframes float {
      0%, 100% { transform: translateY(0) rotate(0deg); }
      50% { transform: translateY(-20px) rotate(10deg); }
    }

    /* Progress Bar */
    .progress-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 4px;
      background: transparent;
      z-index: 1001;
    }

    .progress-bar {
      height: 100%;
      background: linear-gradient(90deg, #ff3366, #ff6699);
      width: 0%;
      transition: width 0.3s;
    }
  </style>
</head>
<body>
  <!-- Intro Popup -->
  <div class="intro-popup" id="introPopup">
    <div class="hearts-animation" id="heartsAnimation"></div>
    
    <div class="intro-content">
      <div class="birthday-cake">üéÇ‚ú®üéÅ</div>
      <h1 class="intro-title">Selamat Ulang Tahun!</h1>
      <h2 class="intro-subtitle">Untuk Kamu yang Tersayang üíï</h2>
      
      <div class="intro-input-container">
        <input type="text" class="intro-input" id="userName" placeholder="Masukkan namamu di sini..." autocomplete="off">
      </div>
      
      <p class="intro-message" id="introMessage">
        Hari ini adalah hari spesialmu! Aku telah menyiapkan kejutan yang penuh cinta dan kenangan indah untukmu. 
        Siap untuk memulai petualangan cinta ini?
      </p>
      
      <div class="countdown-display" id="countdownDisplay">3</div>
      
      <button class="start-btn" onclick="startExperience()">
        <span>üöÄ</span> Mulai Kejutan!
      </button>
      
      <button class="skip-btn" onclick="skipIntro()">
        Lewati & Lanjutkan
      </button>
    </div>
  </div>

  <!-- Main Content (Hidden Initially) -->
  <div class="main-content" id="mainContent">
    <!-- Progress Bar -->
    <div class="progress-container">
      <div class="progress-bar" id="progressBar"></div>
    </div>

    <div class="container">
      <!-- Header -->
      <header>
        <h1 id="mainTitle">Untuk <span id="displayName">Kamu</span>, Cintaku üíï</h1>
        <p class="subtitle">Selamat ulang tahun sayang! Setiap momen bersamamu adalah halaman terindah dalam buku hidupku. Halaman ini kupersembahkan khusus untukmu, penuh dengan cinta dan kenangan manis kita ‚ú®</p>
      </header>

      <!-- Gallery Section -->
      <section class="gallery-container">
        <h2 class="gallery-title">Kenangan Kita üå∏</h2>
        <div class="gallery" id="photoGallery">
          <!-- Gallery items will be loaded by JavaScript -->
        </div>
      </section>

      <!-- Message Section -->
      <section class="message-section">
        <h2 class="message-title">Pesan Dari Hatiku üíå</h2>
        <p class="love-message" id="mainMessage">
          Terima kasih sudah menjadi bagian terindah dalam hidupku. Setiap senyummu, setiap tawamu, dan setiap momen bersamamu adalah berkah yang tak ternilai. Aku bersyukur setiap hari karena memiliki kamu di sisiku. Aku mencintaimu lebih dari kata-kata bisa ungkapkan. ‚ù§Ô∏è
        </p>
        
        <input type="text" class="message-input" id="customMessage" placeholder="Tulis pesan cintamu di sini...">
        <button class="btn btn-primary" onclick="updateMessage()">
          <span>üíù</span> Update Pesan
        </button>
      </section>

      <!-- Buttons -->
      <div class="buttons-container">
        <button class="btn btn-primary" onclick="createHearts(50)">
          <span>‚ù§Ô∏è</span> Hujan Cinta
        </button>
        <button class="btn btn-secondary" onclick="changeTheme()">
          <span>üé®</span> Ganti Tema
        </button>
        <button class="btn btn-primary" onclick="showSurprise()">
          <span>üéÅ</span> Kejutan Spesial
        </button>
        <button class="btn btn-secondary" onclick="shareLove()">
          <span>üì±</span> Bagikan Cinta
        </button>
        <button class="btn btn-primary" onclick="birthdaySpecial()">
          <span>üéÇ</span> Mode Ulang Tahun
        </button>
      </div>
    </div>

    <!-- Music Player -->
    <div class="music-player">
      <button class="music-btn" onclick="toggleMusic()" id="musicBtn">üéµ</button>
      <span style="color: #666; font-size: 0.9rem;">Putar Musik</span>
    </div>

    <!-- Audio -->
   <audio id="introMusic">
      <source src="Intro.mp3" type="audio/mpeg">
   </audio>
  <audio id="bgMusic" loop>
      <source src="interaksi.mp3" type="audio/mpeg">
  </audio>
  <audio id="birthdayMusic">
      <source src="birthday.mp3" type="audio/mpeg">
</audio>
  </div>

  <script>
    // Data untuk galeri
    const memories = [
      {
        img: "foto1.jpg",
        caption: "Saat kita bersama, dunia terasa lebih cerah üåü",
        date: "Momen Spesial"
      },
      {
        img: "foto2.jpg",
        caption: "Setiap tawamu adalah musik terindah untuk hatiku üé∂",
        date: "Tawa Bahagia"
      },
      {
        img: "foto3.jpg",
        caption: "Bersamamu, setiap hari adalah petualangan yang menyenangkan üöÄ",
        date: "Petualangan Kita"
      },
      {
        img: "foto4.jpg",
        caption: "Momen sederhana bersamamu adalah yang paling berharga üíñ",
        date: "Momen Sederhana"
      },
      {
        img: "foto5.jpg",  // <-- PASTIKAN NAMA FILE SAMA
        caption: "Kamu membuatku percaya pada cinta sejati ‚ú®",
        date: "Cinta Sejati"
      },
      {
        img: "foto6.jpg",
        caption: "Aku bersyukur memiliki kamu setiap hari üôè",
        date: "Rasa Syukur"
      }
    ];

    // Kata-kata ucapan ulang tahun
  const birthdayMessages = [
  "Selamat ulang tahun sayangku! Semoga hari ini penuh dengan kebahagiaan dan tawa.",
  "Di hari spesialmu ini, aku berdoa agar semua impianmu menjadi kenyataan.",
  "Semoga panjang umur, sehat selalu, dan makin disayang banyak orang!",
  "Tambah satu tahun, tambah bijak, tambah sukses, dan tambah dicintai!",
  "Selamat merayakan hari kelahiranmu, orang terbaik dalam hidupku!"
];

// ====== TAMBAHKAN KODE ERROR HANDLING DI SINI ======
// Error handling untuk file musik
const audioFiles = {
    intro: 'Intro.mp3',
    background: 'interaksi.mp3', 
    birthday: 'birthday.mp3'
};

// Cek ketersediaan file musik
document.addEventListener('DOMContentLoaded', function() {
    Object.keys(audioFiles).forEach(type => {
        const audio = document.getElementById(
            type === 'intro' ? 'introMusic' : 
            type === 'background' ? 'bgMusic' : 'birthdayMusic'
        );
        
        audio.addEventListener('error', function() {
            console.log(`File ${audioFiles[type]} tidak ditemukan`);
            
            // Fallback ke musik online jika file lokal tidak ada
            if (type === 'background') {
                audio.innerHTML = '<source src="https://assets.mixkit.co/music/preview/mixkit-loving-you-117.mp3" type="audio/mpeg">';
                audio.load();
            }
        });
        
        // Cek jika file berhasil dimuat
        audio.addEventListener('loadeddata', function() {
            console.log(`File ${audioFiles[type]} berhasil dimuat`);
        });
    });
});
// ====== AKHIR DARI KODE TAMBAHAN ======

// Variabel global
let userName = "";
let isBirthdayMode = false;
let countdownInterval;

// Inisialisasi intro
document.addEventListener('DOMContentLoaded', function() {
  playIntroMusic();
  createIntroHearts();
  startCountdown();
  
  // Fokus ke input nama
  document.getElementById('userName').focus();
  
  // Enter key untuk submit nama
  document.getElementById('userName').addEventListener('keypress', function(e) {
    if (e.key === 'Enter') {
      startExperience();
    }
  });
});

    // Buat hati di intro
    function createIntroHearts() {
      const container = document.getElementById('heartsAnimation');
      const hearts = ['‚ù§Ô∏è', 'üíñ', 'üíï', 'üíó', 'üíì', 'üíû', 'üíù', 'üéÇ', 'üéÅ', '‚ú®', 'üéâ'];
      
      for (let i = 0; i < 30; i++) {
        const heart = document.createElement('div');
        heart.className = 'intro-heart';
        heart.innerHTML = hearts[Math.floor(Math.random() * hearts.length)];
        
        const size = Math.random() * 40 + 20;
        const left = Math.random() * 100;
        const duration = Math.random() * 10 + 8;
        const delay = Math.random() * 5;
        
        heart.style.fontSize = `${size}px`;
        heart.style.left = `${left}vw`;
        heart.style.animationDuration = `${duration}s`;
        heart.style.animationDelay = `${delay}s`;
        
        // Random color
        const colors = ['#FFD700', '#FFA500', '#FF6347', '#FF3366', '#FFFFFF'];
        heart.style.color = colors[Math.floor(Math.random() * colors.length)];
        
        container.appendChild(heart);
      }
    }

    // Countdown intro
    function startCountdown() {
      let count = 3;
      const countdownDisplay = document.getElementById('countdownDisplay');
      
      countdownInterval = setInterval(() => {
        if (count > 0) {
          countdownDisplay.textContent = count;
          countdownDisplay.style.animation = 'none';
          void countdownDisplay.offsetWidth; // Trigger reflow
          countdownDisplay.style.animation = 'countdownPop 0.5s ease';
          count--;
        } else {
          clearInterval(countdownInterval);
          countdownDisplay.textContent = 'üéâ';
        }
      }, 1000);
    }

    // Mulai pengalaman
    function startExperience() {
      userName = document.getElementById('userName').value.trim();
      
      if (userName === "") {
        // Animasi shake pada input
        const input = document.getElementById('userName');
        input.style.animation = 'none';
        void input.offsetWidth;
        input.style.animation = 'shake 0.5s ease';
        
        // Ganti placeholder
        input.placeholder = "Nama kamu siapa? Tolong diisi ya...";
        input.focus();
        return;
      }
      
      // Simpan nama di localStorage
      localStorage.setItem('userName', userName);
      
      // Hentikan musik intro
      const introMusic = document.getElementById('introMusic');
      introMusic.pause();
      
      // Animasi keluar intro
      const introPopup = document.getElementById('introPopup');
      introPopup.style.opacity = '0';
      
      // Tampilkan konten utama setelah animasi
      setTimeout(() => {
        introPopup.style.display = 'none';
        
        // Update nama di halaman utama
        document.getElementById('displayName').textContent = userName;
        
        // Update pesan dengan nama
        const messages = [
          `Selamat ulang tahun ${userName}! Terima kasih sudah menjadi bagian terindah dalam hidupku.`,
          `${userName}, setiap senyummu membuat hariku cerah. Selamat ulang tahun sayang!`,
          `Di hari spesialmu ini, ${userName}, aku ingin katakan betapa berartinya kamu untukku.`,
          `${userName}, semoga semua impianmu terkabul di ulang tahunmu ini!`,
          `Untuk ${userName} yang tersayang, selamat merayakan hari kelahiranmu dengan penuh kebahagiaan!`
        ];
        
        document.getElementById('mainMessage').textContent = messages[Math.floor(Math.random() * messages.length)];
        
        // Tampilkan halaman utama
        const mainContent = document.getElementById('mainContent');
        mainContent.classList.add('show');
        
        // Inisialisasi halaman utama
        loadGallery();
        createFloatingHearts();
        setupScrollProgress();
        
        // Mainkan musik latar
        playBackgroundMusic();
        
        // Hujan hati otomatis
        setTimeout(() => createHearts(30), 1000);
      }, 1000);
    }

    // Lewati intro
    function skipIntro() {
      clearInterval(countdownInterval);
      userName = "Sayangku";
      startExperience();
    }

    // Putar musik intro
    function playIntroMusic() {
      const introMusic = document.getElementById('introMusic');
      introMusic.volume = 0.5;
      introMusic.play().catch(e => console.log("Autoplay prevented"));
    }

    // Putar musik latar
    function playBackgroundMusic() {
      const bgMusic = document.getElementById('bgMusic');
      bgMusic.volume = 0.3;
      bgMusic.play().catch(e => console.log("Autoplay prevented"));
    }

    // Mode ulang tahun spesial
    function birthdaySpecial() {
      isBirthdayMode = !isBirthdayMode;
      
      if (isBirthdayMode) {
        // Aktifkan mode ulang tahun
        document.body.style.background = 'linear-gradient(135deg, #FFD700 0%, #FFA500 50%, #FF6347 100%)';
        
        // Ganti musik ke lagu ulang tahun
        const bgMusic = document.getElementById('bgMusic');
        const birthdayMusic = document.getElementById('birthdayMusic');
        bgMusic.pause();
        birthdayMusic.volume = 0.4;
        birthdayMusic.play();
        
        // Update pesan
        document.getElementById('mainMessage').textContent = 
          `SELAMAT ULANG TAHUN ${userName.toUpperCase()}! üéâüéÇ\n\nHari ini adalah hari spesialmu! Aku berdoa agar kamu selalu diberikan kesehatan, kebahagiaan, dan kesuksesan dalam segala hal. Semoga semua impianmu menjadi kenyataan dan kamu selalu dikelilingi oleh orang-orang yang mencintaimu. Aku bersyukur bisa merayakan hari spesial ini bersamamu! üíï`;
        
        // Hujan konfeti
        createBirthdayConfetti();
        
        alert(`üéÇüéâ MODE ULANG TAHUN AKTIF! üéâüéÇ\n\nSelamat ulang tahun ${userName}! Semoga hari ini menjadi hari yang paling indah untukmu!`);
      } else {
        // Nonaktifkan mode ulang tahun
        document.body.style.background = 'linear-gradient(135deg, #ffd6e7 0%, #ffeff6 50%, #ffe6f0 100%)';
        
        // Kembalikan musik
        const bgMusic = document.getElementById('bgMusic');
        const birthdayMusic = document.getElementById('birthdayMusic');
        birthdayMusic.pause();
        bgMusic.play();
        
        alert("Mode ulang tahun dimatikan. Tetap semangat ya!");
      }
    }

    // Konfeti ulang tahun
    function createBirthdayConfetti() {
      const confettiItems = ['üéâ', 'üéä', 'üéà', 'üéÅ', '‚ú®', 'üåü', 'üíù', 'ü•≥', 'üéÇ', 'üç∞'];
      
      for (let i = 0; i < 100; i++) {
        setTimeout(() => {
          const confetti = document.createElement('div');
          confetti.className = 'heart';
          confetti.innerHTML = confettiItems[Math.floor(Math.random() * confettiItems.length)];
          
          const size = Math.random() * 40 + 20;
          const left = Math.random() * 100;
          const duration = Math.random() * 4 + 2;
          const delay = Math.random() * 2;
          
          confetti.style.fontSize = `${size}px`;
          confetti.style.left = `${left}vw`;
          confetti.style.animationDuration = `${duration}s`;
          confetti.style.animationDelay = `${delay}s`;
          
          // Random color
          const colors = ['#FFD700', '#FFA500', '#FF6347', '#FF3366', '#32CD32'];
          confetti.style.color = colors[Math.floor(Math.random() * colors.length)];
          
          document.body.appendChild(confetti);
          
          // Remove after animation
          setTimeout(() => {
            if (confetti.parentNode) {
              confetti.parentNode.removeChild(confetti);
            }
          }, (duration + delay) * 1000);
        }, i * 30);
      }
    }

    // Fungsi-fungsi utama yang sudah ada
    function loadGallery() {
      const gallery = document.getElementById('photoGallery');
      gallery.innerHTML = memories.map(memory => `
        <div class="gallery-item" onclick="showMemoryDetail('${memory.date}')">
          <img src="${memory.img}" alt="${memory.date}" class="gallery-img" onerror="this.src='https://images.unsplash.com/photo-1518568814500-bf0f8d125f46?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80'">
          <div class="gallery-caption">
            <div>
              <strong>${memory.date}</strong><br>
              ${memory.caption}
            </div>
          </div>
        </div>
      `).join('');
    }

    function createHearts(count) {
      for (let i = 0; i < count; i++) {
        setTimeout(() => {
          const heart = document.createElement('div');
          heart.className = 'heart';
          heart.innerHTML = '‚ù§Ô∏è';
          
          const size = Math.random() * 30 + 20;
          const left = Math.random() * 100;
          const duration = Math.random() * 3 + 2;
          const delay = Math.random() * 2;
          
          heart.style.fontSize = `${size}px`;
          heart.style.left = `${left}vw`;
          heart.style.animationDuration = `${duration}s`;
          heart.style.animationDelay = `${delay}s`;
          
          const colors = ['#ff3366', '#ff6699', '#ff33cc', '#ff0066'];
          heart.style.color = colors[Math.floor(Math.random() * colors.length)];
          
          document.body.appendChild(heart);
          
          setTimeout(() => {
            if (heart.parentNode) {
              heart.parentNode.removeChild(heart);
            }
          }, (duration + delay) * 1000);
        }, i * 100);
      }
    }

    function createFloatingHearts() {
      for (let i = 0; i < 20; i++) {
        const heart = document.createElement('div');
        heart.className = 'floating-heart';
        heart.innerHTML = 'üíñ';
        
        const size = Math.random() * 40 + 20;
        const left = Math.random() * 100;
        const top = Math.random() * 100;
        const delay = Math.random() * 5;
        
        heart.style.fontSize = `${size}px`;
        heart.style.left = `${left}vw`;
        heart.style.top = `${top}vh`;
        heart.style.animationDelay = `${delay}s`;
        
        document.body.appendChild(heart);
      }
    }

    let isDarkTheme = false;
    function changeTheme() {
      isDarkTheme = !isDarkTheme;
      if (isDarkTheme) {
        document.body.style.background = 'linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%)';
        document.body.style.color = '#fff';
        document.querySelectorAll('.gallery-container, .message-section, header').forEach(el => {
          el.style.background = 'rgba(255, 255, 255, 0.1)';
          el.style.color = '#fff';
        });
      } else {
        document.body.style.background = 'linear-gradient(135deg, #ffd6e7 0%, #ffeff6 50%, #ffe6f0 100%)';
        document.body.style.color = '#333';
        document.querySelectorAll('.gallery-container, .message-section, header').forEach(el => {
          el.style.background = 'rgba(255, 255, 255, 0.9)';
          el.style.color = '#333';
        });
      }
    }

    function updateMessage() {
      const input = document.getElementById('customMessage');
      const messageBox = document.getElementById('mainMessage');
      
      if (input.value.trim()) {
        messageBox.textContent = input.value;
        input.value = '';
        
        messageBox.style.transform = 'scale(1.1)';
        setTimeout(() => {
          messageBox.style.transform = 'scale(1)';
        }, 300);
      }
    }

    function showSurprise() {
      const surprises = [
        "üíñ Kamu adalah yang terbaik! üíñ",
        "üåπ Aku mencintaimu lebih dari kemarin! üåπ",
        "‚ú® Kamu membuat hidupku berarti! ‚ú®",
        "üéâ Selamat! Kamu dapat pelukan virtual! üéâ",
        "üåü Kamu adalah bintang dalam hidupku! üåü"
      ];
      
      alert(surprises[Math.floor(Math.random() * surprises.length)]);
      createHearts(30);
    }

    function shareLove() {
      if (navigator.share) {
        navigator.share({
          title: 'Untuk Cintaku ‚ù§Ô∏è',
          text: 'Lihat halaman cinta spesial yang dibuat untukmu!',
          url: window.location.href
        });
      } else {
        alert('Bagikan link ini kepada orang tersayang: ' + window.location.href);
      }
    }

    function showMemoryDetail(title) {
      alert(`üì∏ ${title}\n\nIni adalah salah satu momen terindah kita. Aku selalu tersenyum saat mengingatnya! üíï`);
    }

    function toggleMusic() {
      const music = document.getElementById(isBirthdayMode ? 'birthdayMusic' : 'bgMusic');
      const btn = document.getElementById('musicBtn');
      
      if (music.paused) {
        music.play();
        btn.innerHTML = 'üîä';
        btn.style.color = '#ff3366';
      } else {
        music.pause();
        btn.innerHTML = 'üéµ';
        btn.style.color = '#ff3366';
      }
    }

    function setupScrollProgress() {
      const progressBar = document.getElementById('progressBar');
      
      window.addEventListener('scroll', () => {
        const windowHeight = document.documentElement.scrollHeight - document.documentElement.clientHeight;
        const scrolled = (window.scrollY / windowHeight) * 100;
        progressBar.style.width = scrolled + '%';
      });
    }

    // Tambahkan animasi shake untuk CSS
    const style = document.createElement('style');
    style.textContent = `
      @keyframes shake {
        0%, 100% { transform: translateX(0); }
        10%, 30%, 50%, 70%, 90% { transform: translateX(-10px); }
        20%, 40%, 60%, 80% { transform: translateX(10px); }
      }
    `;
    document.head.appendChild(style);
  </script>
</body>
</html>